<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>é­”æ³•ç›’å­</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="background-image"></div>
    <div class="overlay"></div>
    <div class="celebration-effect" id="celebrationEffect"></div>
    <div class="container">
        <div class="image-container">
            <img src="opened.png" alt="Opened Pandora Box" class="theme-image">
        </div>
        <div class="coins-container" id="coinsContainer">
            <img src="Coins.png" alt="Coins" class="coins-image" id="coinsImage">
            <img src="gratecoin.png" alt="Gratecoin" class="gratecoin-image" id="gratecoinImage" style="display: none;">
        </div>
        <div class="box-reward-message">
            <h2>ğŸ‰ æ­å–œä½ ï¼</h2>
            <p id="rewardMessage">ä½ æˆåŠŸæ‰“é–‹äº†é­”æ³•ç›’å­ï¼Œç²å¾—äº†<span class="special-reward-text">ç³§é£Ÿè²¨å¹£</span>ä¸€æšä½œçš„çå‹µï¼</p>
        </div>
        <button class="back-btn" onclick="window.location.href='index.html'">â¬…ï¸ è¿”å›</button>
    </div>
    <script>
        // Create celebration effect (confetti and fireworks)
        function createCelebrationEffect() {
            const celebrationContainer = document.getElementById('celebrationEffect');
            if (!celebrationContainer) return;
            
            // Clear any existing effects
            celebrationContainer.innerHTML = '';
            
            // Create confetti
            const confettiColors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#f0932b', '#eb4d4b', '#6c5ce7', '#a29bfe'];
            const confettiCount = 100;
            
            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.backgroundColor = confettiColors[Math.floor(Math.random() * confettiColors.length)];
                confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                celebrationContainer.appendChild(confetti);
            }
            
            // Create fireworks at multiple positions
            const fireworkPositions = [
                { x: 20, y: 30 },
                { x: 50, y: 25 },
                { x: 80, y: 30 },
                { x: 30, y: 50 },
                { x: 70, y: 50 },
                { x: 50, y: 70 }
            ];
            
            fireworkPositions.forEach((pos, index) => {
                setTimeout(() => {
                    createFirework(pos.x, pos.y, celebrationContainer);
                }, index * 200);
            });
            
            // Clean up after animation
            setTimeout(() => {
                celebrationContainer.innerHTML = '';
            }, 5000);
        }

        // Create a single firework
        function createFirework(x, y, container) {
            const firework = document.createElement('div');
            firework.className = 'firework';
            firework.style.left = x + '%';
            firework.style.top = y + '%';
            
            const fireworkColors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#f0932b', '#eb4d4b', '#6c5ce7', '#a29bfe', '#ffd32a', '#ff6348'];
            
            // Create particles
            for (let i = 1; i <= 12; i++) {
                const particle = document.createElement('div');
                particle.className = 'firework-particle';
                particle.style.backgroundColor = fireworkColors[Math.floor(Math.random() * fireworkColors.length)];
                firework.appendChild(particle);
            }
            
            container.appendChild(firework);
            
            // Remove firework after animation
            setTimeout(() => {
                if (firework.parentNode) {
                    firework.parentNode.removeChild(firework);
                }
            }, 2000);
        }

        // Check achievement status and show appropriate rewards
        function checkAchievementsAndShowRewards() {
            // Check achievement status
            const prevAllRocksCollected = localStorage.getItem('prevAllRocksCollected') === 'true';
            const prevAllItemsCollected = localStorage.getItem('prevAllItemsCollected') === 'true';
            
            const coinsImage = document.getElementById('coinsImage');
            const gratecoinImage = document.getElementById('gratecoinImage');
            const rewardMessage = document.getElementById('rewardMessage');
            
            // Always show coins
            if (coinsImage) coinsImage.style.display = 'block';
            
            // Only show gratecoin (ç‰¹é¸ç³§é£Ÿè²¨å¹£) if æ¢éšªå®¶ achievement is unlocked
            if (prevAllItemsCollected) {
                // æ¢éšªå®¶æˆå°±è§£é–ï¼šé¡¯ç¤ºç³§é£Ÿè²¨å¹£å’Œç‰¹é¸ç³§é£Ÿè²¨å¹£
                if (gratecoinImage) gratecoinImage.style.display = 'block';
                if (rewardMessage) {
                    rewardMessage.innerHTML = 'ä½ æˆåŠŸæ‰“é–‹äº†é­”æ³•ç›’å­ï¼Œç²å¾—äº†<span class="special-reward-text">ç³§é£Ÿè²¨å¹£</span>å’Œ<span class="special-reward-text">ç‰¹é¸ç³§é£Ÿè²¨å¹£</span>ä½œç‚ºçå‹µï¼';
                }
            } else {
                // Only é­”æ³•å¤§å¸«æˆå°±ï¼šåªé¡¯ç¤ºç³§é£Ÿè²¨å¹£
                if (gratecoinImage) gratecoinImage.style.display = 'none';
                if (rewardMessage) {
                    rewardMessage.innerHTML = 'ä½ æˆåŠŸæ‰“é–‹äº†é­”æ³•ç›’å­ï¼Œç²å¾—äº†<span class="special-reward-text">ç³§é£Ÿè²¨å¹£</span>ä¸€æšä½œçš„çå‹µï¼';
                }
            }
        }

        // Trigger celebration effect when page loads
        window.addEventListener('DOMContentLoaded', function() {
            createCelebrationEffect();
            checkAchievementsAndShowRewards();
        });
    </script>
</body>
</html>
